{% extends 'base.html' %}
{% load static %}

{% block head_block %}
<title>post</title>
<link rel="stylesheet" href="{% static 'css/postPage.css' %}">
<link rel="stylesheet" href="{% static 'css/postCard.css' %}">
{% endblock %}

{% block body_block %}

<div class="post flex flex-column">
    <div class="post__meta flex flex-column center-align">
        <div class="post__meta--container">
            <p class="post__meta--title">{{post.title}}</p>
            <p class="post__meta--category">Category: <span>{{post.category}}</span> </p>
            <p class='post__meta--author'>Author: <span>{{post.author}}</span></p>
            <p class="post__meta--publish-dt">publish on: <span>{{post.publish_date}}</span> | {{post.read_time}} min
                read</p>
        </div>

        <div class="post__featured-image">
            {% if post.featured_image %}
            <img src="{{post.featured_image.url}}" alt="image">
            {% endif %}
        </div>
    </div>
    <div class="post__body">
        <div class="post__body--content">
            <article class="post__body--content--body">
                {{post.body|safe}}
            </article>
        </div>
        <div class="post__body--side-container">
            <aside class="post__body--side-bar">
                <div class="latest-post card">
                    <p class="card--title">Latest Post</p>
                    <div class="latest-post-container">
                        <div class="card__post--top flex flex-column">
                            {% if top_post.featured_image %}
                            <img class="card__post--top--image" src="{{top_post.featured_image.url}}" alt="thumbnail">
                            {% else %}
                            <div class="card__post--top--image">
                                <svg class="post-card--svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path
                                        d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z" />
                                </svg>
                            </div>
                            {% endif %}
                            <div class="card__post--top--details flex-column flex">
                                <a href="{% url 'blog:post_detail' id=top_post.postId slug=top_post.slug %}"
                                    class="card__post--top--title">{{top_post.title|truncatechars:55}}</a>
                                <article class="card__post--top--body">
                                    {{top_post.body|safe|truncatewords_html:30}}
                                </article>
                            </div>
                        </div>
                        <div class="card__post">
                            {% for post in latest_post %}
                            <div class="card__post--container flex center-align">
                                {% if post.featured_image %}
                                <img class='thumbnail' src="{{post.featured_image.url}}" alt="" width="50px"
                                    height="auto">
                                {% else %}
                                <div class="thumbnail--no-image">
                                    <svg class="thumbnail--svg" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 512 512">
                                        <path
                                            d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z" />
                                    </svg>
                                </div>
                                {% endif %}
                                <a href="{% url 'blog:post_detail' id=post.postId slug=post.slug %}"
                                    class="card__post--list">{{post.title|truncatechars:55}}</a>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                </div>
                <div class="card">
                    <p class="card--title">ads by google</p>
                    <div class="card__ad-box--right">
                    </div>
                </div>

            </aside>
        </div>
    </div>
    <div class="post__change flex">
        {% if pre_post %}
        <div class="post__change__previous">
            <a class="post__change--title--previous"
                href="{% url 'blog:post_detail' id=pre_post.postId slug=pre_post.slug %}">{{pre_post.title}}</a>
            <div class="post__change__btn--previous flex">
                <svg class="post__change__btn--icon--previous" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path
                        d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z" />
                </svg>
                <a class="post__change__btn--link default-link"
                    href="{% url 'blog:post_detail' id=pre_post.postId slug=pre_post.slug %}">Previous Post</a>
            </div>
        </div>
        {% endif %}
        {% if nxt_post %}
        <div class="post__change__next">
            <a class="post__change--title--next"
                href="{% url 'blog:post_detail' id=nxt_post.postId slug=nxt_post.slug %}">{{nxt_post.title}}</a>
            <div class="post__change__btn--next flex">
                <a class="post__change__btn--link default-link"
                    href="{% url 'blog:post_detail' id=nxt_post.postId slug=nxt_post.slug %}">Next Post</a>
                <svg class="post__change__btn--icon--next" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path
                        d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z" />
                </svg>
            </div>
        </div>
        {% endif %}
    </div>
    <div class="post__footer-posts">
        <h1 class="footer-posts-heading">Related Posts</h1>
        <div class="footer-posts-container flex">
            {% for post in related_category_post %}
            {% include './postCard.html' with post=post %}
            {% endfor %}
        </div>
    </div>
    {% include './comments.html' %}
    {% include './commentForm.html' %}

</div>

{% endblock %}